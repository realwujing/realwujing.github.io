# 计算机组成与体系结构

## 主存储器

主存储器（Main memory）是存放指令和数据，并能由中央处理器（CPU）直接随机存取的随机存储器（RAM）。主要由存储体、控制线路、地址寄存器、数据寄存器和地址译码电路五部分组成。

- [主存储器](https://blog.51cto.com/u_15127663/3697454?abTest=51cto)

## 控制器

程序计数器PC：存储下一条要执行指令的地址。

## 存储系统

### 层次化存储结构

- [Cache和Buffer的区别](https://blog.51cto.com/u_14286115/5194187)

### 主存编址

- 存储单元
  - 存储单元个数=最大地址-最小地址+1

- 编址内容
  - 按字编址：存储体的存储单元是字存储单元，即最小寻址单位是一个字
  - 按字节编址：存储体的存储单元是字节存储单元，即最小寻址单位是一个字节
  - [“一个字等于多少个字节？”是一个不严谨的问法
](https://blog.csdn.net/Fabulous1111/article/details/79525384)

- 总容量
  - 总容量=存储单元个数*编址内容

- 总片数
  - 总片数=总容量/每片的容量
  - [试题来源：2010年下半年系统架构设计师考试试题](https://www.educity.cn/rk/586060.html)
  - [题解：2010年下半年系统架构设计师考试试题](https://www.51bdks.net/view/8p974.html)

    内存按字节编址，利用8K*4bit的存储器芯片构成84000H到8FFFFH的内存，共需（）片。
    A 6
    B 8
    C 12
    D 24

    解析：本题的题型在软考中较为常见，其难度在于计算时需要注意技巧，如果不注意技巧，将浪费大量时间于无谓的计算过程。
    8FFFFH-84000H+1=（8FFFFH+1）-84000H=90000H-84000H=C000H，化为十进制为48K。
    $C000H=12*16^3=2^2*3*2^{12}=3*2^4*2^{10}=48*1024=48K$
    由于内存是按字节编址，所以存储容量为：$48K*8bit，48K*8bit/(8K*4bit)=12$。

## 存储管理

### 磁盘管理

- 读取磁盘数据的时间应该包括以下三个部分：
  - 找磁道的时间。
  - 找块（扇区）的时间，即旋转延迟时间。
  - 传输时间。

- 存取时间=寻道时间+等待时间（平均定位时间+转动延迟）这个公式我认为有问题。
我认为应该是：存取时间=寻道时间+转动延迟+存（或取）磁盘扇区内容的时间？

>1. 试题一
  > [试题来源：2012年上半年系统分析师考试试题](https://www.educity.cn/rk/585904.html)
  > [题解：假设某磁盘的每个磁道划分成11个物理块……处理11个记录的最少时间为（ ）。](https://blog.csdn.net/interestANd/article/details/115539993)
>2. 试题二
  > [假设磁盘臂位于15号柱面上，进程的请求序列如下表所示，如果采用最短移臂调度算法，那么系统的响应序列应为（  ）。](https://www.ruankaoti.com/ruanjianshejishi/103110202031972.html)

## 数据传输控制方式

从上到下效率越来越高：

- 程序控制（查询）方式
- 程序中断方式
- DMA方式
- 通道方式
- I/O处理机

### 参考

- [DMA方式与通道方式](https://www.cnblogs.com/juanzhi/p/12837375.html)
- [I/O通道](https://baike.baidu.com/item/I%2FO%E9%80%9A%E9%81%93/451362)

## 总线

一条总线同一时刻仅允许一个设备发送，但允许多个设备接收。所以总线是半双工模式。

- 半双工与全双工
  - [简述单工、半双工、全双工的区别
](https://blog.csdn.net/chaofanwei/article/details/13274815)
- 串行总线与并行总线
  - [串并行总线的区别和优劣，看完这篇就懂了！](https://new.qq.com/rain/a/20210609A03VSB00)
  - [串行总线和并行总线的区别
](https://mbb.eet-china.com/blog/3890995-413465.html)

### 总线分类

- 数据总线（Data Bus, DB）：在CPU与ARM之间来回传送需要处理或是需要储存的数据。
- 地址总线（Address Bus, AB）：用来指定在RAM（Random Access Memory）之中储存的数据的地址。
- 控制总线（Control Bus, CB）：将微处理器控制单元（Control Unit）的信号，传送到周边设备。

- [试题：下列说法中正确的是（  ）。](https://blog.csdn.net/oopxiajun2011/article/details/108432340)

## CISC与RISC

- 复杂指令集计算机(CISC, Complex Instruction Set Computers)
- 精简指令集计算机(RISC, Reduced Instruction Set Computers)

| 指令系统类型 | 指令 | 寻址方式 | 实现方式 | 其他 |
| :-----: | :----: | :----: | :----: | :----: | :----: |
| CISC(复杂) | 数据量多，使用评率差别大，可变长格式 | 支持多种 | 微程序控制技术(微码) | 研制周期长 |
| RISC(精简) | 数量少，使用频率接近，定长格式，大部分为单周期指令，操作寄存器，只有Load/Store操作内存 | 支持方式少 | 增加了通用寄存器；硬布线逻辑控制为主；适合采用流水线 | 优化编译，有效支持高级语言 |

## 流水线

相关参数计算：流水线执行时间计算、流水线吞吐率、流水线加速比等。

→取指→分析→执行→

### 流水线执行时间计算

流水线周期为执行时间最长的一段

流水线计算公式为：

- $1条指令执行时间+(指令条数-1)*流水线周期$
  - 理论公式：$(t_1+t_2+..+t_k)+(n-1)*t$
  - 实践公式：$k*t+(n-1)*t$

- 试题一
  - [一条指令的执行过程可以分解为取指、分析和执行三步，在取指时间t取指=3△t、分析时间t分析=2△t、执行时间t执行=4△t的情况下，若按串行方式执行，则10条指令全部执行完需要（  ）△t；若按流水线的方式执行，则10条指令全部执行完需要（  ）△t。](https://wx.xisaiwang.com/tiku2/136/26778.html)

### 流水线吞吐率

流水线的吞吐率（Though Put rate, TP）是指在单位时间内流水线所完成的任务数量或输出的结果数量。计算流水线吞吐率的最基本公式如下：

$$TP=\displaystyle\frac{指令条数}{流水线执行时间}$$

流水线的最大吞吐率：

$$TP_{max}=\displaystyle\lim_{n \to ∞}{\frac{n}{(k+n-1)t}}={\frac{1}{t}}$$

### 流水线加速比计算

完成同样一批任务，不使用流水线所用的时间与使用流水线所用的时间之比为流水线的加速比。计算流水线加速比的基本公式如下：
$$S=\displaystyle\frac{不使用流水线执行时间}{使用流水线执行时间}$$

- [试题：某计算机系统采用5级流水线结构执行指令](https://wx.xisaiwang.com/tiku2/351833.html)

## 嵌入式系统开发设计

### 芯片

| 类型 | 简介 |
| :-----: | :----: |
| DSP芯片 | 数字信号处理器 |
| SoC片上系统 | Soc是一个微小型系统 |
| MPU微处理器 | 微机中的中央处理器 |
| MCU微控制单元 | 又称单片微型计算机或者单片机 |

- [试题：嵌入式处理器是嵌入式系统的核心不见……错误的是（ ）。](http://www.cnitpm.com/st/286712756.html)

## 校验码

### 奇偶校验

奇偶校验的编码方法是：由若干位有效信息（如一个字节），再加上一个二进制位（校验位）组成校验码。

- 奇校验：整个校验码（有效信息位和校验位）中“1”的个数为奇数。
- 偶校验：整个校验码（有效信息位和校验位）中“1”的个数为偶数。

奇偶校验，可检查1位的错误，不可纠错。

[Parity(奇偶校验)和ECC（错误检查和纠正）](https://blog.csdn.net/icxiaoge/article/details/79996456)
